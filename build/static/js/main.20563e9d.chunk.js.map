{"version":3,"sources":["constant.js","axios/index.js","services/JwtService.js","components/LoginDialog.js","components/Navbar.js","components/CourseTable.js","services/CourseService.js","views/EnrolledCourses.js","views/AllCourses.js","App.js","reportWebVitals.js","index.js"],"names":["TOKEN_COOKIE_NAME","token","cookies","load","axios","create","baseURL","headers","JwtService","username","password","post","LoginDialog","props","Dialog","open","onClose","handleClose","DialogTitle","id","DialogContent","TextField","label","fullWidth","onChange","e","target","value","type","DialogActions","Button","onClick","color","console","log","then","response","data","id_token","save","window","location","reload","catch","error","String","autoFocus","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","Navbar","classes","React","useState","setOpen","prompt","handleClickOpen","remove","className","AppBar","position","Toolbar","Typography","variant","component","Link","to","table","minWidth","CourseTable","TableContainer","Paper","Table","TableHead","TableRow","TableCell","align","TableBody","courses","map","row","index","scope","courseName","courseContent","courseLocation","teacherId","action","name","CourseService","get","delete","EnrolledCourses","state","this","getSelectedCourses","dropCourse","bind","alert","setState","Component","AllCourses","setCourses","useEffect","App","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.20563e9d.chunk.js","sourcesContent":["export const TOKEN_COOKIE_NAME = 'jwt_token';","import axios from 'axios';\nimport cookies from \"react-cookies\";\nimport {TOKEN_COOKIE_NAME} from \"../constant\";\n\nconst token = cookies.load(TOKEN_COOKIE_NAME)\nexport default axios.create({\n  baseURL: \"http://course-enrollment-alb-506420894.us-east-2.elb.amazonaws.com:8080\",\n  headers: {\n    \"Authorization\": `Bearer ${token}`\n  }\n})","import axios from \"../axios\";\n\nexport const JwtService={\n    authenticate: function(username,password){\n        return axios.post( '/api/authenticate', {\n            username: username,\n            password: password\n        }\n        )\n    }\n};","  import React from 'react';\n  import Button from '@material-ui/core/Button';\n  import Dialog from '@material-ui/core/Dialog';\n  import DialogActions from '@material-ui/core/DialogActions';\n  import DialogContent from '@material-ui/core/DialogContent';\n  import DialogContentText from '@material-ui/core/DialogContentText';\n  import DialogTitle from '@material-ui/core/DialogTitle';\n  import {TextField} from \"@material-ui/core\";\n import { JwtService } from '../services/JwtService';\nimport cookies from \"react-cookies\";\nimport {TOKEN_COOKIE_NAME} from \"../constant\";\n\n  export default function LoginDialog(props) {\n    let username;\n    let password;\n    return (\n      <div>\n        \n        <Dialog\n          open={props.open}\n          onClose={props.handleClose}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">Please Login</DialogTitle>\n          <DialogContent>\n            <TextField id=\"standard-basic\" label=\"Username\" fullWidth onChange={e => username = e.target.value}/>\n            <TextField id=\"standard-basic\" label=\"Password\" fullWidth type = \"password\" onChange={e => password = e.target.value}/>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.handleClose} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={login} color=\"primary\" autoFocus>\n              Submit\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n    function login(){\n      console.log(\"Submitting\", username,password);\n      JwtService.authenticate(username,password) //Promise\n        .then(response => {\n            const token = response.data.id_token;\n            cookies.save(TOKEN_COOKIE_NAME, token); //save token to  memory \n            window.location.reload();  //?\n        })   //成功了拿到一个response, 从 UserController Class JwtToken 里面的idToken， JWT 返回一个object , 里面的key默认id_token\n        .catch(error => console.log(String(error)))    //fail then get a error\n    }\n  }\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { Link } from 'react-router-dom';\nimport LoginDialog from './LoginDialog';\nimport cookies from \"react-cookies\";\nimport {TOKEN_COOKIE_NAME} from \"../constant\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function Navbar() {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const token = cookies.load(TOKEN_COOKIE_NAME);   //load cookie to memory\n  const prompt = token ? \"Logout\" : \"Login\";  //authorized --> show login , else show log out \n\n  const handleClickOpen = () => {\n    if (token) {\n      //logout\n      cookies.remove(TOKEN_COOKIE_NAME);\n      window.location.reload();\n    } else {\n      setOpen(true) \n      //login\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            Course Enrollment Service\n          </Typography>\n          <Button color=\"inherit\" component={Link} to=\"/\" >All Courses</Button>\n          <Button color=\"inherit\" component={Link} to=\"/enrolled\">Enrolled Courses</Button>\n          <Button color=\"inherit\" onClick= {handleClickOpen}>{prompt}</Button>\n          \n        </Toolbar>\n      </AppBar>\n      <LoginDialog open={open} handleClickOpen={handleClickOpen} handleClose={handleClose}/>\n    </div>\n  );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {Button} from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n    table: {\n        minWidth: 650,\n    },\n});\n\nexport default function CourseTable(props) {\n    const classes = useStyles();\n\n    return (\n        <TableContainer component={Paper}>\n            <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                    <TableRow>\n                        <TableCell>#</TableCell>\n                        <TableCell align=\"right\">Course Name</TableCell>\n                        <TableCell align=\"right\">Course Content</TableCell>\n                        <TableCell align=\"right\">Course Location</TableCell>\n                        <TableCell align=\"right\">Teacher ID</TableCell>\n                        <TableCell align=\"right\">Action</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {props.courses.map((row, index) => (\n                        <TableRow key={row.name}>\n                            <TableCell component=\"th\" scope=\"row\">\n                                {index + 1}\n                            </TableCell>\n                            <TableCell align=\"right\">{row.courseName}</TableCell>\n                            <TableCell align=\"right\">{row.courseContent}</TableCell>\n                            <TableCell align=\"right\">{row.courseLocation}</TableCell>\n                            <TableCell align=\"right\">{row.teacherId}</TableCell>\n                            <TableCell align=\"right\">\n                                <Button variant=\"contained\" color=\"primary\"\n                                        onClick={() => props.action(row.courseName)}>\n                                    {props.label}\n                                </Button>\n                            </TableCell>\n                        </TableRow>\n                    ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n}\n","import axios from \"../axios\";\n\nexport const CourseService = {\n    getAllCourses: function() {\n        //XHR\n        return axios.get('/api/courses');\n    },\n    getSelectedCourse: function () {\n        return axios.get(\"/api/student/selected-courses\");\n    },\n    enrollCourse: function (courseName) {\n        return axios.post(`/api/student/course/${courseName}`);\n    },\n    dropCourse: function (courseName) {\n        return axios.delete(`/api/student/course/${courseName}`);\n    },\n};\n\n// 前端连后端","import React from 'react';\nimport CourseTable from \"../components/CourseTable\";\nimport {CourseService} from \"../services/CourseService\";\n\nexport default class EnrolledCourses extends React.Component {\n    state = {\n        courses: []\n    };\n\n    componentDidMount() {\n        this.getSelectedCourses();\n    }\n\n    render() {\n        return (\n            <div>\n                <CourseTable courses={this.state.courses}  action={this.dropCourse.bind(this)} label=\"Drop\"/>\n            </div>\n        );\n    }\n\n    dropCourse(courseName) {\n        console.log(\"dropCourse this\", this);\n        CourseService.dropCourse(courseName)\n            .then(response => {\n                alert(`Successfully dropped course ${courseName}.`);\n                // \"this\" does not always pointing to the class itself.\n                // By default, \"this\" will point to the context.\n                this.getSelectedCourses();\n            })\n            .catch(error => {\n                alert(`Failed to dropped course ${courseName}.`);\n            })\n    }\n\n    getSelectedCourses() {\n        CourseService.getSelectedCourse()\n            .then(response => {\n                this.setState({courses: response.data});\n            })\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport CourseTable from '../components/CourseTable';\nimport { CourseService } from '../services/CourseService';\n\nexport default function AllCourses() {\n    const [courses, setCourses] = useState([]);\n    // ComponentDidMount\n    useEffect(() => {\n        // AJAX\n        // 1. Make XHR call\n        CourseService.getAllCourses() //Promise\n        .then(response => {\n            // 2. Display result on the page\n            // courses are fectched from response.data\n            setCourses(response.data);\n        })\n        .catch(error => console.error(error));\n    }, []);\n    return (\n        <div>\n            <CourseTable courses={courses} action={enrollCourse} label=\"Enroll\"/>     \n        </div>\n    );\n    \n    function enrollCourse(courseName) {\n        CourseService.enrollCourse(courseName)\n            .then(response => {\n                alert(`Successfully enrolled course ${courseName}.`);\n            })\n            .catch(error => {\n                alert(`Failed to enrolled course ${courseName}.`);\n            })\n    }\n}","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport CourseTable from \"./components/CourseTable\";\nimport EnrolledCourses from \"./views/EnrolledCourses\";\nimport AllCourses from \"./views/AllCourses\";\nimport LoginDialog from \"./components/LoginDialog\";\n\nexport default function App() {\n  return (\n    <Router>\n      <div>\n        <Navbar/>\n        \n        {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n        <Switch>\n          <Route path=\"/debug\">\n            <LoginDialog/>    \n          </Route>\n          <Route path=\"/enrolled\">\n            <EnrolledCourses/>\n          </Route>\n                 \n          <Route path=\"/\">\n            <AllCourses/>\n          </Route>\n\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nfunction Home() {\n  return <h2>Home</h2>;\n}\n\nfunction About() {\n  return <h2>About</h2>;\n}\n\nfunction Users() {\n  return <h2>Users</h2>;\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}